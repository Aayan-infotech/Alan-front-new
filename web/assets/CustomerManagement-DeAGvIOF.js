import{r as l,j as e}from"./index-DL5taDVF.js";import{a as j}from"./index-DW_MHI2K.js";import{c as u,a as i}from"./index.esm-BZN3EXKz.js";import{C as Z,a as _}from"./CCardBody-D1K57JHO.js";import{C as F}from"./CCardHeader-YPvH19q6.js";import{C as L,a as R,b as E,c as t,d as P,e as n,f as p,g,h as f,i as b,j as y}from"./CTable-DPqkE7aM.js";import{c as U}from"./cil-pencil-m516yCOw.js";import{c as $}from"./cil-trash-CBbKHhHb.js";import{C as q}from"./CForm-HRzsMEuT.js";import{a as o,C as c}from"./CFormInput-Bmg2GR8s.js";import"./DefaultLayout-Bp0ODGA1.js";import"./cil-user-Ddrdy7PS.js";var G=["512 512","<rect width='34.924' height='34.924' x='256' y='95.998' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M16,496H496V16H16ZM48,48H464V464H48Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M285.313,359.032a18.123,18.123,0,0,1-15.6,8.966,18.061,18.061,0,0,1-17.327-23.157l35.67-121.277A49.577,49.577,0,0,0,194.7,190.572l-11.718,28.234,29.557,12.266,11.718-28.235a17.577,17.577,0,0,1,33.1,11.7l-35.67,121.277A50.061,50.061,0,0,0,269.709,400a50.227,50.227,0,0,0,43.25-24.853l15.1-25.913-27.646-16.115Z' class='ci-primary'/>"];const J="http://18.221.196.222:7878/api/CustMng/customers",ne=()=>{const[N,S]=l.useState([]),[k,d]=l.useState(!1),[w,h]=l.useState(!1),[v,m]=l.useState(null),[K,z]=l.useState(!1),[r,x]=l.useState({id:"",name:"",email:"",mobile:"",state:"",zipCode:"",address:""}),[A,M]=l.useState(!0),C=async()=>{try{M(!0);const s=await j.get(J);S(s.data.data)}catch(s){console.error("Error fetching customers:",s)}finally{M(!1)}};l.useEffect(()=>{C()},[]);const a=s=>{const{name:B,value:D}=s.target;x({...r,[B]:D})},H=s=>{x(s),h(!0)},I=s=>{x({...s,id:s._id}),z(!0),d(!0)},T=async()=>{try{await j.put(`http://18.221.196.222:7878/api/CustMng/customers/${r.id}`,{name:r.name,mobile:r.mobile,state:r.state,zipCode:r.zipCode,address:r.address}),C(),d(!1)}catch(s){console.error("Error updating customer:",s)}},V=async()=>{try{await j.delete(`http://18.221.196.222:7878/api/CustMng/delete/${v}`),C(),m(null)}catch(s){console.error("Error deleting customer:",s)}};return e.jsxs("div",{className:"container mt-4",children:[e.jsxs(Z,{children:[e.jsx(F,{children:e.jsx("h3",{children:"Customer Management"})}),e.jsx(_,{children:A?e.jsx("p",{children:"Loading..."}):e.jsxs(L,{hover:!0,responsive:!0,children:[e.jsx(R,{color:"dark",children:e.jsxs(E,{children:[e.jsx(t,{children:"ID"}),e.jsx(t,{children:"Name"}),e.jsx(t,{children:"Email"}),e.jsx(t,{children:"Mobile"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(P,{children:N.map(s=>e.jsxs(E,{children:[e.jsx(n,{children:s._id}),e.jsx(n,{children:s.name}),e.jsx(n,{children:s.email}),e.jsx(n,{children:s.mobile||"N/A"}),e.jsxs(n,{children:[e.jsx(u,{icon:G,size:"lg",className:"me-2",onClick:()=>H(s)}),e.jsx(u,{icon:U,size:"lg",className:"me-2",onClick:()=>I(s)}),e.jsx(u,{icon:$,size:"lg",onClick:()=>m(s._id)})]})]},s._id))})]})})]}),e.jsxs(p,{visible:w,onClose:()=>h(!1),children:[e.jsx(g,{closeButton:!0,children:e.jsx(f,{children:"Customer Details"})}),e.jsxs(b,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",r.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",r.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mobile:"})," ",r.mobile]}),e.jsxs("p",{children:[e.jsx("strong",{children:"State:"})," ",r.state]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zip Code:"})," ",r.zipCode]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",r.address]})]}),e.jsx(y,{children:e.jsx(i,{color:"secondary",onClick:()=>h(!1),children:"Close"})})]}),e.jsxs(p,{visible:k,onClose:()=>d(!1),children:[e.jsx(g,{closeButton:!0,children:e.jsx(f,{children:"Edit Customer"})}),e.jsx(b,{children:e.jsxs(q,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{children:"Name"}),e.jsx(c,{type:"text",name:"name",value:r.name,onChange:a})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{children:"Mobile"}),e.jsx(c,{type:"text",name:"mobile",value:r.mobile,onChange:a})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{children:"State"}),e.jsx(c,{type:"text",name:"state",value:r.state,onChange:a})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{children:"Zip Code"}),e.jsx(c,{type:"text",name:"zipCode",value:r.zipCode,onChange:a})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{children:"Address"}),e.jsx(c,{type:"text",name:"address",value:r.address,onChange:a})]})]})}),e.jsxs(y,{children:[e.jsx(i,{color:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx(i,{color:"primary",onClick:T,children:"Update"})]})]}),e.jsxs(p,{visible:v!==null,onClose:()=>m(null),children:[e.jsx(g,{closeButton:!0,children:e.jsx(f,{children:"Confirm Delete"})}),e.jsx(b,{children:"Are you sure you want to delete this customer?"}),e.jsxs(y,{children:[e.jsx(i,{color:"secondary",onClick:()=>m(null),children:"Cancel"}),e.jsx(i,{color:"danger",onClick:V,children:"Delete"})]})]})]})};export{ne as default};
