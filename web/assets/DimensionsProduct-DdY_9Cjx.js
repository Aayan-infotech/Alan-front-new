import{u as P,r as g,j as e}from"./index-DL5taDVF.js";import{F as f,f as $,h as N,d as k}from"./index-DWFs_9Jd.js";/* empty css                          */import{C as G,a as T}from"./CCardBody-D1K57JHO.js";import{C as A}from"./CCardHeader-YPvH19q6.js";import{C as E}from"./CForm-HRzsMEuT.js";import{a as w,C as S}from"./CFormInput-Bmg2GR8s.js";import{C as H}from"./CFormSelect-BxuutBKw.js";import{a as b}from"./index.esm-BZN3EXKz.js";import{C as L,a as y}from"./CRow-Bj4MggOl.js";const B=({sectionName:t,options:p,displayData:i,handleInputChange:d,handleAddData:l,handleDeleteData:u,addSuccessMessage:x,formData:o})=>e.jsxs(G,{className:"mb-4 shadow-sm custom-card",children:[e.jsx(A,{className:"custom-card-header",children:e.jsxs("h5",{className:"text-primary",children:["Add ",t]})}),e.jsx(T,{children:e.jsxs(E,{children:[e.jsx(w,{className:"custom-label",children:t}),e.jsxs(H,{onChange:a=>d(a,t),value:o[t]||"",className:"custom-select",children:[e.jsxs("option",{value:"",children:["Select ",t]}),p.map((a,c)=>e.jsx("option",{value:a,children:a},c))]}),t==="widthHeight"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"custom-label",children:"Amount"}),e.jsx(S,{type:"number",onChange:a=>d(a,"amount"),value:o.amount||"",className:"custom-input"})]}),t!=="widthHeight"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"custom-label",children:"Entry %"}),e.jsx(S,{type:"number",onChange:a=>d(a,`${t}Percentage`),value:o[`${t}Percentage`]||"",className:"custom-input"})]}),e.jsx("div",{className:"text-center",children:e.jsxs(b,{color:"primary",className:"btn-add mt-3",onClick:()=>l(t),disabled:!o[t]||t!=="widthHeight"&&!o[`${t}Percentage`]||t==="widthHeight"&&!o.amount,children:[e.jsx(f,{icon:$,className:"mr-2"})," Add"]})}),x&&e.jsxs("div",{className:"mt-3 text-center text-success",children:[e.jsx(f,{icon:N,className:"mr-2"})," Data added successfully!"]}),e.jsx("div",{className:"mt-4",children:i.length===0?e.jsx("p",{className:"text-muted text-center",children:"No data added yet."}):i.map((a,c)=>e.jsxs(L,{className:"align-items-center custom-row",children:[e.jsx(y,{children:t==="widthHeight"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:a.widthHeight})," -"," ",a.value===null||a.value===""?e.jsxs("span",{children:[e.jsx("strong",{children:"Amount:"})," ",a.amount]}):e.jsxs("span",{children:[e.jsx("strong",{children:"Value:"})," ",a.value]})]}):e.jsxs(e.Fragment,{children:[a[t]," - ",a.value]})}),e.jsx(y,{}),e.jsx(y,{children:e.jsx(b,{color:"danger",className:"btn-delete",onClick:()=>u(t,a._id,c),children:e.jsx(f,{icon:k})})})]},c))})]})})]}),q=()=>{const t=P(),{Product_id:p}=t.state||{},[i,d]=g.useState({}),[l,u]=g.useState({widthHeight:[],Grid:[],Fin:[],Color:[],TemperingOption:[],installation:[],Lock:[],GlassType:[],panelSpacing:[],sideWindowOpens:[]}),[x,o]=g.useState(!1),[a,c]=g.useState(!0),F={widthHeight:["22*5","4*6","7*7","7*5","7*8","3*7"],Grid:["No Grid","Flat grid Between the glass","⅝” Flat Grid Between the Glass","⅝” Flat Grid Between the Glass Prarie"],Fin:["Dual Wall Integral Flush Fin","Nail Fin","No Fin"],Color:["White","Almond","Bronze","Black","AC Black"],TemperingOption:["Yes","No"],installation:["Yes","No"],Lock:["Auto Lock","Cam Lock"],GlassType:["Obscure","No Obscure"],PanelSpacing:["panel Spacing 1/4-1/2-1/4","panel Spacing 1/3-1/3-1/3"],SideWindowOpens:["XO","OX"]},j={widthHeight:"dimsWH",Grid:"dimsGrid",Fin:"dimsFin",Color:"dimsColor",TemperingOption:"dimsTamper",installation:"dimsInst",Lock:"dimsLock",GlassType:"dimsGType",PanelSpacing:"dimsPSpacing",SideWindowOpens:"dimsSWinOpens"};g.useEffect(()=>{(async()=>{c(!0);const r={};for(const[n,m]of Object.entries(j))try{const h=await fetch(`http://18.221.196.222:7878/api/dims/type/${n}/ProductID/${p}`);if(!h.ok)throw new Error(`Failed to fetch ${n} data. Status: ${h.status}`);const C=await h.json();r[n]=C||[]}catch(h){console.error(`Error fetching ${n} data:`,h),r[n]=[]}u(r),c(!1)})()},[p]);const O=(s,r)=>{d({...i,[r]:s.target.value})},v=async s=>{const r={Product_id:p,[s]:i[s],value:i[`${s}Percentage`]};s==="widthHeight"&&(r.amount=i.amount),console.log(r),console.log(r);try{const m=await(await fetch(`http://18.221.196.222:7878/api/${j[s]}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();u({...l,[s]:[...l[s]||[],m]}),o(!0),setTimeout(()=>o(!1),2e3),d({...i,[s]:"",[`${s}Percentage`]:"",amount:""})}catch(n){console.error(`Error adding ${s} data:`,n)}},D=async(s,r,n)=>{try{await fetch(`http://18.221.196.222:7878/api/${j[s]}/${r}`,{method:"DELETE"});const m=(l[s]||[]).filter((h,C)=>C!==n);u({...l,[s]:m})}catch(m){console.error(`Error deleting ${s} data:`,m)}};return a?e.jsx("p",{className:"text-center",children:"Loading..."}):e.jsxs("div",{className:"container mt-5",children:[e.jsx("h1",{className:"text-center mb-4",children:"Dimensions Product"}),Object.keys(F).map(s=>e.jsx(B,{sectionName:s,options:F[s],displayData:l[s]||[],handleInputChange:O,handleAddData:v,handleDeleteData:D,addSuccessMessage:x,formData:i},s))]})};export{q as default};
